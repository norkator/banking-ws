import * as chai from 'chai';
import {DFApplicationResponse} from './DFApplicationResponse';
import {DFFileDescriptor, DFInterface, SoftwareIdInterface} from '../interfaces';
import {FileTypes} from '../constants';

const expect = chai.expect;
describe('DFApplicationResponse', async () => {

  it('should return expected payment status report details', async () => {
    const dfApplicationResponseMessage = '<?xml version=\'1.0\' encoding=\'UTF-8\'?><soapenv:Envelope xmlns:cor="http://bxd.fi/CorporateFileService" xmlns:mod="http://model.bxd.fi" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"><soapenv:Header><wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" soapenv:mustUnderstand="1"><wsse:BinarySecurityToken EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary" ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3" wsu:Id="X509-18b2584c-067d-434b-adb4-0db5094d01c3">MIIFrTCCA5WgAwIBAgIPAYKM9lB6sjhJ9NyaOyCQMA0GCSqGSIb3DQEBCwUAMEoxCzAJBgNVBAYTAkZJMRAwDgYDVQQKDAdTYW1saW5rMSkwJwYDVQQDDCBTYW1saW5rIFN5c3RlbSBUZXN0IFNlcnZlciBDQSB2MjAeFw0yMjA4MTExMjUyMDhaFw0yMzA4MTExMjUyMDhaMFsxCzAJBgNVBAYTAkZJMRAwDgYDVQQKDAdTYW1saW5rMQ4wDAYDVQQHDAVFc3BvbzEOMAwGA1UECwwFVGVzdGkxGjAYBgNVBAMMEXNtbC1zZXJ2aWNlcy10ZXN0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAv1IdSel/+Y7u74jk09d/b2TgND8dguuT8ZvbpO+xHhkf1rh+QsIJhu+c0eoqs3tw3e54OZgBeIRo/WlykOeehcvvtJDFI2pzf9Y8jmVslKlItEEmBoo1g738hDfbmbdP3Cl+HJJTJROOEAW3PFhpOwV/93o9LQUdgFYOeBMsygF8m9r18uqBaEMw/LmBQx4kNXnXt9ZiS5GbFO0zwI5jSL4Anw6DitvqlpNd0rU4lLakdjvihtAHhBD5+iXGqaGh5Hf/fFdj1hgytGGpw4kiWStDu18s21Aa+x0AR1Uh8JDspszU+J5EQuoYY7p034Gq4blHdHazV3D0Ahy3NoKULQIDAQABo4IBfTCCAXkwHwYDVR0jBBgwFoAU5O4Kgle/MJDgjLGmNFNyXEh+DZwwHQYDVR0OBBYEFD50REjyRHvy9LRyODztL5SHpIlKMA4GA1UdDwEB/wQEAwIEsDAcBgNVHREEFTATghFzbWwtc2VydmljZXMtdGVzdDBTBgNVHR8ETDBKMEigRqBEhkJodHRwOi8vY3JsLTMudHJ1c3QudGVsaWFzb25lcmEuY29tL3NhbWxpbmtzeXN0ZW10ZXN0c2VydmVyY2F2Mi5jcmwwHQYDVR0lBBYwFAYIKwYBBQUHAwIGCCsGAQUFBwMBMIGUBggrBgEFBQcBAQSBhzCBhDAvBggrBgEFBQcwAYYjaHR0cDovL29jc3AucHJlcHJvZC50cnVzdC50ZWxpYS5jb20wUQYIKwYBBQUHMAKGRWh0dHA6Ly9yZXBvc2l0b3J5LnRydXN0LnRlbGlhc29uZXJhLmNvbS9zYW1saW5rc3lzdGVtdGVzdHVzZXJjYXYyLmNlcjANBgkqhkiG9w0BAQsFAAOCAgEAhRcZmTLGRuSqqupJ4GMKzZQnYVCnpCkAJQuuUZEYYpBSZPWHuFdmHnxBCYeMgW4VxZ5eHM1eERWhNbTY0gkEq3zW1Z3v4/LNgIQFYHSi+ECzDY6uy9Tk3T/EjYqhg/L0b2a9cTpfxu7OcYEbBkLqoSrxuyHVscAC2c8wADO1dOLAmMtoYcjM4qY0dmnC4wSFLRX71Q323+QdvJCSO5qzVfvIhklP+GBD6n5BuFZbgfs5ti4GximCH8acICsAfhDdv0MYeNYLaauX7iGyLqG9sUS3IWgzeFh37+aWojlGlt59l4qAUVc/qNfy0PzhCWYF9LD5YDygVBxs8ypGaAU5Q445FuYFaprGYZw9hJ68CnIPSCNOVZ5H6Ch7TZF0wkp/8XdYn3ggX9T4JkZDMjJ9FRVXgWKJlOKHTFdu4bo6L4yVTZ9fC9KK9NZeXldYneYBRt6PgylcrrOLs14z6Xnv3VqTxElaXdaUJOlw0HxMn5Gc09w3+rTkA8nIg4sjbpSuIP2conJrVFxvHgnVb3gSQwu2yh8D8YqmeaxjUAmCEqWxrgbC8ra129tEpRuFZ2lBJqvg3/TtkTsGePpcw9P/yPTkGsgitTwQMLB+/ZA41nYU0g3SfEOywfryWbXxINbLmxrP1Gmd5iPWTGvJZqvTIsvBRQNXTT0ZDgSYJGPE9h8=</wsse:BinarySecurityToken><wsu:Timestamp wsu:Id="TS-52605b04-1178-4ac8-ad47-ff6881949d0b"><wsu:Created>2023-03-10T13:40:13.390Z</wsu:Created><wsu:Expires>2023-03-10T13:45:13.390Z</wsu:Expires></wsu:Timestamp><ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#" Id="SIG-ba478e54-023a-4083-9689-f23da42f913a"><ds:SignedInfo><ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/><ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/><ds:Reference URI="#TS-52605b04-1178-4ac8-ad47-ff6881949d0b"><ds:Transforms><ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/></ds:Transforms><ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/><ds:DigestValue>kynl/EjhgLYn3ffiP072Ly2hEQ8=</ds:DigestValue></ds:Reference><ds:Reference URI="#id-fd886087-22f7-4201-97ea-932a594c3a64"><ds:Transforms><ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/></ds:Transforms><ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/><ds:DigestValue>E73XXvukWPome7O/AzpNDk305y8=</ds:DigestValue></ds:Reference></ds:SignedInfo><ds:SignatureValue>c2Cpgnk39hYyeoogOiD38kUdlTOmgva1f8svIClOGmbkBOkx/YX0aN/H7YsfEtePnX6vwr6/PO6QeK0GM14Z+IVFRQvTfJpD6QdaUlpEo5fiqDe2kdtgUtFmRoZETnOg72znaV9yIhAkbQRES8HckdzRdRF8HPGzOYVkvpfR/kHIBR4/0zOjZYAmEt1vDP8bRnGRGmIQ61Ntxw39vOZjopQTS6rasKHyFAzQs0QVPd9LDJf0Kc5fmhF5b62dyuH8zF/ctpPLbK06ifqkV4y0jovbgfhJp8ZIsbcq9X7TCDXCuk4SJ/BUEYzhggBTvxXAhz7jl6m5cbc9nbtEux0riQ==</ds:SignatureValue><ds:KeyInfo Id="KI-e284b5e1-c99f-4c17-961b-ebf0ad19c47b"><wsse:SecurityTokenReference xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="STR-c42444de-0fb3-4d74-87e4-1815e8966ee3"><wsse:Reference URI="#X509-18b2584c-067d-434b-adb4-0db5094d01c3" ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3"/></wsse:SecurityTokenReference></ds:KeyInfo></ds:Signature></wsse:Security></soapenv:Header><soapenv:Body xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="id-fd886087-22f7-4201-97ea-932a594c3a64"><cor:downloadFileout><mod:ResponseHeader><mod:SenderId>97357407</mod:SenderId><mod:RequestId>123456</mod:RequestId><mod:Timestamp>2023-03-10T15:40:13.388</mod:Timestamp><mod:ResponseCode>00</mod:ResponseCode><mod:ResponseText>OK</mod:ResponseText><mod:ReceiverId></mod:ReceiverId></mod:ResponseHeader><mod:ApplicationResponse>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PEFwcGxpY2F0aW9uUmVzcG9uc2UgeG1sbnM9Imh0dHA6Ly9ieGQuZmkveG1sZGF0YS8iIHhtbG5zOm5zMj0iaHR0cDovL3d3dy53My5vcmcvMjAwMC8wOS94bWxkc2lnIyI+PEN1c3RvbWVySWQ+OTczNTc0MDc8L0N1c3RvbWVySWQ+PFRpbWVzdGFtcD4yMDIzLTAzLTEwVDE1OjQwOjEzLjM1NSswMjowMDwvVGltZXN0YW1wPjxSZXNwb25zZUNvZGU+MDA8L1Jlc3BvbnNlQ29kZT48UmVzcG9uc2VUZXh0Pk9LPC9SZXNwb25zZVRleHQ+PEVuY3J5cHRlZD5mYWxzZTwvRW5jcnlwdGVkPjxDb21wcmVzc2VkPmZhbHNlPC9Db21wcmVzc2VkPjxGaWxlRGVzY3JpcHRvcnM+PEZpbGVEZXNjcmlwdG9yPjxGaWxlUmVmZXJlbmNlPjU1MzQ4MTwvRmlsZVJlZmVyZW5jZT48VGFyZ2V0SWQ+Tk9ORTwvVGFyZ2V0SWQ+PFVzZXJGaWxlbmFtZT5OT05FLnBhbGF1dGU8L1VzZXJGaWxlbmFtZT48UGFyZW50RmlsZVJlZmVyZW5jZT41NTM0ODA8L1BhcmVudEZpbGVSZWZlcmVuY2U+PEZpbGVUeXBlPlhQPC9GaWxlVHlwZT48RmlsZVRpbWVzdGFtcD4yMDIzLTAzLTA5VDE4OjU5OjEwLjE5MyswMjowMDwvRmlsZVRpbWVzdGFtcD48U3RhdHVzPkRMRDwvU3RhdHVzPjxMYXN0RG93bmxvYWRUaW1lc3RhbXA+MjAyMy0wMy0xMFQxNToxOToxOC44ODYrMDI6MDA8L0xhc3REb3dubG9hZFRpbWVzdGFtcD48Rm9yd2FyZGVkVGltZXN0YW1wPjIwMjMtMDMtMDlUMTg6NTk6MTAuMTkzKzAyOjAwPC9Gb3J3YXJkZWRUaW1lc3RhbXA+PERlbGV0YWJsZT5mYWxzZTwvRGVsZXRhYmxlPjwvRmlsZURlc2NyaXB0b3I+PC9GaWxlRGVzY3JpcHRvcnM+PEZpbGVUeXBlIHhtbG5zOnhzPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSIgeG1sbnM6eHNpPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZSIgeHNpOnR5cGU9InhzOnN0cmluZyI+WFA8L0ZpbGVUeXBlPjxDb250ZW50PlBEOTRiV3dnZG1WeWMybHZiajBuTVM0d0p5QmxibU52WkdsdVp6MG5WVlJHTFRnblB6NDhSRzlqZFcxbGJuUWdlRzFzYm5NOUluVnlianBwYzI4NmMzUmtPbWx6YnpveU1EQXlNanAwWldOb09uaHpaRHB3WVdsdUxqQXdNaTR3TURFdU1ETWlJSGh0Ykc1ek9uaHphVDBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01TOVlUVXhUWTJobGJXRXRhVzV6ZEdGdVkyVWlQanhEYzNSdGNsQnRkRk4wYzFKd2RENDhSM0p3U0dSeVBqeE5jMmRKWkQ0d01UZzNNVFE1TUY4eE5qYzRNemd4TVRVd01UZ3pQQzlOYzJkSlpENDhRM0psUkhSVWJUNHlNREl6TFRBekxUQTVWREU0T2pVNU9qRXdMakU0TXlzd01qb3dNRHd2UTNKbFJIUlViVDQ4U1c1cGRHZFFkSGsrUEU1dFBrWnBibUZ1YzJWc2JDQlBlVHd2VG0wK1BDOUpibWwwWjFCMGVUNDhSR0owY2tGbmRENDhSbWx1U1c1emRHNUpaRDQ4UWtsRFBrbFVSVXhHU1VoSVBDOUNTVU0rUEM5R2FXNUpibk4wYmtsa1Bqd3ZSR0owY2tGbmRENDhMMGR5Y0Voa2NqNDhUM0puYm14SGNuQkpibVpCYm1SVGRITStQRTl5WjI1c1RYTm5TV1ErVFZOSFNVUXlNREl6TURNOEwwOXlaMjVzVFhOblNXUStQRTl5WjI1c1RYTm5UbTFKWkQ1d1lXbHVMakF3TVM0d01ERXVNREk4TDA5eVoyNXNUWE5uVG0xSlpENDhSM0p3VTNSelBrRkRWRU04TDBkeWNGTjBjejQ4TDA5eVoyNXNSM0p3U1c1bVFXNWtVM1J6UGp3dlEzTjBiWEpRYlhSVGRITlNjSFErUEM5RWIyTjFiV1Z1ZEQ0PTwvQ29udGVudD48U2lnbmF0dXJlIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwLzA5L3htbGRzaWcjIj48U2lnbmVkSW5mbz48Q2Fub25pY2FsaXphdGlvbk1ldGhvZCBBbGdvcml0aG09Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvMTAveG1sLWV4Yy1jMTRuI1dpdGhDb21tZW50cyIvPjxTaWduYXR1cmVNZXRob2QgQWxnb3JpdGhtPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwLzA5L3htbGRzaWcjcnNhLXNoYTEiLz48UmVmZXJlbmNlIFVSST0iIj48VHJhbnNmb3Jtcz48VHJhbnNmb3JtIEFsZ29yaXRobT0iaHR0cDovL3d3dy53My5vcmcvMjAwMC8wOS94bWxkc2lnI2VudmVsb3BlZC1zaWduYXR1cmUiLz48VHJhbnNmb3JtIEFsZ29yaXRobT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS8xMC94bWwtZXhjLWMxNG4jV2l0aENvbW1lbnRzIi8+PC9UcmFuc2Zvcm1zPjxEaWdlc3RNZXRob2QgQWxnb3JpdGhtPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwLzA5L3htbGRzaWcjc2hhMSIvPjxEaWdlc3RWYWx1ZT5ZR1BmY3IxbXloNWVsT21VZUkwYVVPWldrRms9PC9EaWdlc3RWYWx1ZT48L1JlZmVyZW5jZT48L1NpZ25lZEluZm8+PFNpZ25hdHVyZVZhbHVlPlRBY0lhWDBrSHgxM1VjNGJHMGZmZms3TzRuZHBCZHMybkRNZE9CTU9LcjRIclI1YmhrOWFqbDFQOXE0Z0FJV0lvT3l4eGxxQnA4M003VFhCdUMvMEs4V0g1OVdyNnAveFVPc1ZXVWVYWmcrWDNwWGV3Y2RwNHNqYkoyS2FML1ZSaXY2cTRiVkFvN2FYNGVsaXk4enAzR1ZLRURBRkNPaEFOWWNoaXZWS3Izc2VjY0xRdDlaaHlhMndWR0pRbjM0OHZ4ckVReGpzWlF4Z2tmS1VPUzhKTk9xdFNlRVZYTUJPVngvS2JrbWdHa25xMWg5NHRnenNnM3Nnbkk1WGNCRnN6VFUya29QUnlVUi9SQkRjOVJ3ZlFoSzBacm1kekR0VkFZOWRTTVU2NEROOGlhWTA5dDV3c1M3WlNBM001Q0huRGZ0WkZMbXk0cHRTNEdwSDR2ODhmUT09PC9TaWduYXR1cmVWYWx1ZT48S2V5SW5mbz48WDUwOURhdGE+PFg1MDlDZXJ0aWZpY2F0ZT5NSUlGclRDQ0E1V2dBd0lCQWdJUEFZS005bEI2c2poSjlOeWFPeUNRTUEwR0NTcUdTSWIzRFFFQkN3VUFNRW94Q3pBSkJnTlZCQVlUQWtaSk1SQXdEZ1lEVlFRS0RBZFRZVzFzYVc1ck1Ta3dKd1lEVlFRRERDQlRZVzFzYVc1cklGTjVjM1JsYlNCVVpYTjBJRk5sY25abGNpQkRRU0IyTWpBZUZ3MHlNakE0TVRFeE1qVXlNRGhhRncweU16QTRNVEV4TWpVeU1EaGFNRnN4Q3pBSkJnTlZCQVlUQWtaSk1SQXdEZ1lEVlFRS0RBZFRZVzFzYVc1ck1RNHdEQVlEVlFRSERBVkZjM0J2YnpFT01Bd0dBMVVFQ3d3RlZHVnpkR2t4R2pBWUJnTlZCQU1NRVhOdGJDMXpaWEoyYVdObGN5MTBaWE4wTUlJQklqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQ0FROEFNSUlCQ2dLQ0FRRUF2MUlkU2VsLytZN3U3NGprMDlkL2IyVGdORDhkZ3V1VDhadmJwTyt4SGhrZjFyaCtRc0lKaHUrYzBlb3FzM3R3M2U1NE9aZ0JlSVJvL1dseWtPZWVoY3Z2dEpERkkycHpmOVk4am1Wc2xLbEl0RUVtQm9vMWc3MzhoRGZibWJkUDNDbCtISkpUSlJPT0VBVzNQRmhwT3dWLzkzbzlMUVVkZ0ZZT2VCTXN5Z0Y4bTlyMTh1cUJhRU13L0xtQlF4NGtOWG5YdDlaaVM1R2JGTzB6d0k1alNMNEFudzZEaXR2cWxwTmQwclU0bExha2RqdmlodEFIaEJENStpWEdxYUdoNUhmL2ZGZGoxaGd5dEdHcHc0a2lXU3REdTE4czIxQWEreDBBUjFVaDhKRHNwc3pVK0o1RVF1b1lZN3AwMzRHcTRibEhkSGF6VjNEMEFoeTNOb0tVTFFJREFRQUJvNElCZlRDQ0FYa3dId1lEVlIwakJCZ3dGb0FVNU80S2dsZS9NSkRnakxHbU5GTnlYRWgrRFp3d0hRWURWUjBPQkJZRUZENTBSRWp5Ukh2eTlMUnlPRHp0TDVTSHBJbEtNQTRHQTFVZER3RUIvd1FFQXdJRXNEQWNCZ05WSFJFRUZUQVRnaEZ6Yld3dGMyVnlkbWxqWlhNdGRHVnpkREJUQmdOVkhSOEVUREJLTUVpZ1JxQkVoa0pvZEhSd09pOHZZM0pzTFRNdWRISjFjM1F1ZEdWc2FXRnpiMjVsY21FdVkyOXRMM05oYld4cGJtdHplWE4wWlcxMFpYTjBjMlZ5ZG1WeVkyRjJNaTVqY213d0hRWURWUjBsQkJZd0ZBWUlLd1lCQlFVSEF3SUdDQ3NHQVFVRkJ3TUJNSUdVQmdnckJnRUZCUWNCQVFTQmh6Q0JoREF2QmdnckJnRUZCUWN3QVlZamFIUjBjRG92TDI5amMzQXVjSEpsY0hKdlpDNTBjblZ6ZEM1MFpXeHBZUzVqYjIwd1VRWUlLd1lCQlFVSE1BS0dSV2gwZEhBNkx5OXlaWEJ2YzJsMGIzSjVMblJ5ZFhOMExuUmxiR2xoYzI5dVpYSmhMbU52YlM5ellXMXNhVzVyYzNsemRHVnRkR1Z6ZEhWelpYSmpZWFl5TG1ObGNqQU5CZ2txaGtpRzl3MEJBUXNGQUFPQ0FnRUFoUmNabVRMR1J1U3FxdXBKNEdNS3paUW5ZVkNucENrQUpRdXVVWkVZWXBCU1pQV0h1RmRtSG54QkNZZU1nVzRWeFo1ZUhNMWVFUldoTmJUWTBna0VxM3pXMVozdjQvTE5nSVFGWUhTaStFQ3pEWTZ1eTlUazNUL0VqWXFoZy9MMGIyYTljVHBmeHU3T2NZRWJCa0xxb1NyeHV5SFZzY0FDMmM4d0FETzFkT0xBbU10b1ljak00cVkwZG1uQzR3U0ZMUlg3MVEzMjMrUWR2SkNTTzVxelZmdkloa2xQK0dCRDZuNUJ1RlpiZ2ZzNXRpNEd4aW1DSDhhY0lDc0FmaERkdjBNWWVOWUxhYXVYN2lHeUxxRzlzVVMzSVdnemVGaDM3K2FXb2psR2x0NTlsNHFBVVZjL3FOZnkwUHpoQ1dZRjlMRDVZRHlnVkJ4czh5cEdhQVU1UTQ0NUZ1WUZhcHJHWVp3OWhKNjhDbklQU0NOT1ZaNUg2Q2g3VFpGMHdrcC84WGRZbjNnZ1g5VDRKa1pETWpKOUZSVlhnV0tKbE9LSFRGZHU0Ym82TDR5VlRaOWZDOUtLOU5aZVhsZFluZVlCUnQ2UGd5bGNyck9MczE0ejZYbnYzVnFUeEVsYVhkYVVKT2x3MEh4TW41R2MwOXczK3JUa0E4bklnNHNqYnBTdUlQMmNvbkpyVkZ4dkhnblZiM2dTUXd1MnloOEQ4WXFtZWF4alVBbUNFcVd4cmdiQzhyYTEyOXRFcFJ1RloybEJKcXZnMy9UdGtUc0dlUHBjdzlQL3lQVGtHc2dpdFR3UU1MQisvWkE0MW5ZVTBnM1NmRU95d2ZyeVdiWHhJTmJMbXhyUDFHbWQ1aVBXVEd2SlpxdlRJc3ZCUlFOWFRUMFpEZ1NZSkdQRTloOD08L1g1MDlDZXJ0aWZpY2F0ZT48WDUwOVN1YmplY3ROYW1lPkNOPXNtbC1zZXJ2aWNlcy10ZXN0LCBPVT1UZXN0aSwgTD1Fc3BvbywgTz1TYW1saW5rLCBDPUZJPC9YNTA5U3ViamVjdE5hbWU+PC9YNTA5RGF0YT48L0tleUluZm8+PC9TaWduYXR1cmU+PC9BcHBsaWNhdGlvblJlc3BvbnNlPg==</mod:ApplicationResponse></cor:downloadFileout></soapenv:Body></soapenv:Envelope>';

    const df: DFInterface = {
      userParams: {
        bank: 'Samlink',
        environment: 'PRODUCTION',
        customerId: '97357407',
        Base64EncodedRootCA: '',
        rejectUnauthorized: true,
      },
      verifyResponseSignature: true,
      Base64EncodedBankCsr: '',
      requestUrl: '',
      Timestamp: '2021-08-06T01:01:48+03:00',
      SoftwareId: {name: 'TEST', version: '0.0.0'} as SoftwareIdInterface,
      ExecutionSerial: '',
      Base64EncodedClientCsr: '',
      RequestId: '123456',
      language: 'FI',
      fileType: 'XP',
      fileReferences: ['553481']
    };

    const dfResponse = new DFApplicationResponse(df, dfApplicationResponseMessage);
    const parsed: DFFileDescriptor = await dfResponse.parseBody();

    expect(parsed.FileReference).to.equal('553481');
    expect(parsed.FileType).to.equal(FileTypes.XP);
    expect(parsed.Status).to.equal('DLD');
    expect(parsed.Deletable).to.equal('false');

    expect(parsed.PaymentStatusReport?.MessageIdentifier).to.equal( '01871490_1678381150183');
    expect(parsed.PaymentStatusReport?.OriginalMessageIdentification).to.equal( 'MSGID202303');
    expect(parsed.PaymentStatusReport?.OriginalPaymentInformationIdentification).to.equal( 'pain.001.001.02');
    expect(parsed.PaymentStatusReport?.Status.GroupStatus).to.equal('ACTC');

    expect(parsed.BankStatement).to.equal(null);
  });


  it('should return expected payment error response details with RJCT payment', async () => {
    const dfApplicationResponseMessage = '<?xml version=\'1.0\' encoding=\'UTF-8\'?><soapenv:Envelope xmlns:cor="http://bxd.fi/CorporateFileService" xmlns:mod="http://model.bxd.fi" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"><soapenv:Header></soapenv:Header><soapenv:Body xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="id-9207990a-7ac1-455d-8e28-28bf73c03d32"><cor:downloadFileout><mod:ResponseHeader><mod:SenderId>12345678</mod:SenderId><mod:RequestId>123456</mod:RequestId><mod:Timestamp>2023-08-31T20:27:39.387</mod:Timestamp><mod:ResponseCode>00</mod:ResponseCode><mod:ResponseText>OK</mod:ResponseText><mod:ReceiverId></mod:ReceiverId></mod:ResponseHeader><mod:ApplicationResponse>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PEFwcGxpY2F0aW9uUmVzcG9uc2UgeG1sbnM9Imh0dHA6Ly9ieGQuZmkveG1sZGF0YS8iIHhtbG5zOm5zMj0iaHR0cDovL3d3dy53My5vcmcvMjAwMC8wOS94bWxkc2lnIyI+PEN1c3RvbWVySWQ+MTIzNDU2Nzg8L0N1c3RvbWVySWQ+PFRpbWVzdGFtcD4yMDIzLTA4LTMxVDIwOjI3OjM5LjM2OCswMzowMDwvVGltZXN0YW1wPjxSZXNwb25zZUNvZGU+MDA8L1Jlc3BvbnNlQ29kZT48UmVzcG9uc2VUZXh0Pk9LPC9SZXNwb25zZVRleHQ+PEVuY3J5cHRlZD5mYWxzZTwvRW5jcnlwdGVkPjxDb21wcmVzc2VkPmZhbHNlPC9Db21wcmVzc2VkPjxGaWxlRGVzY3JpcHRvcnM+PEZpbGVEZXNjcmlwdG9yPjxGaWxlUmVmZXJlbmNlPjEyMzEyMzEyMzE8L0ZpbGVSZWZlcmVuY2U+PFRhcmdldElkPk5PTkU8L1RhcmdldElkPjxVc2VyRmlsZW5hbWU+Tk9ORS5wYWxhdXRlPC9Vc2VyRmlsZW5hbWU+PFBhcmVudEZpbGVSZWZlcmVuY2U+MjM0MjM0MjM0MjwvUGFyZW50RmlsZVJlZmVyZW5jZT48RmlsZVR5cGU+WFA8L0ZpbGVUeXBlPjxGaWxlVGltZXN0YW1wPjIwMjMtMDgtMjNUMjE6MTY6MDUuMDUzKzAzOjAwPC9GaWxlVGltZXN0YW1wPjxTdGF0dXM+RExEPC9TdGF0dXM+PExhc3REb3dubG9hZFRpbWVzdGFtcD4yMDIzLTA4LTMxVDIwOjI1OjQwLjUyNyswMzowMDwvTGFzdERvd25sb2FkVGltZXN0YW1wPjxGb3J3YXJkZWRUaW1lc3RhbXA+MjAyMy0wOC0yM1QyMToxNjowNS4wNTMrMDM6MDA8L0ZvcndhcmRlZFRpbWVzdGFtcD48RGVsZXRhYmxlPmZhbHNlPC9EZWxldGFibGU+PC9GaWxlRGVzY3JpcHRvcj48L0ZpbGVEZXNjcmlwdG9ycz48RmlsZVR5cGUgeG1sbnM6eHM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hIiB4bWxuczp4c2k9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlIiB4c2k6dHlwZT0ieHM6c3RyaW5nIj5YUDwvRmlsZVR5cGU+PENvbnRlbnQ+UEQ5NGJXd2dkbVZ5YzJsdmJqMG5NUzR3SnlCbGJtTnZaR2x1WnowblZWUkdMVGduUHo0OFJHOWpkVzFsYm5RZ2VHMXNibk05SW5WeWJqcHBjMjg2YzNSa09tbHpiem95TURBeU1qcDBaV05vT25oelpEcHdZV2x1TGpBd01pNHdNREV1TURNaUlIaHRiRzV6T25oemFUMGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TVM5WVRVeFRZMmhsYldFdGFXNXpkR0Z1WTJVaVBqeERjM1J0Y2xCdGRGTjBjMUp3ZEQ0OFIzSndTR1J5UGp4TmMyZEpaRDR3TVRJek1USXpNVjh4TWpNeE1qTXhNak14TWpNeFBDOU5jMmRKWkQ0OFEzSmxSSFJVYlQ0eU1ESXpMVEE0TFRJelZESXhPakUyT2pBMUxqQTFNU3N3TXpvd01Ed3ZRM0psUkhSVWJUNDhTVzVwZEdkUWRIaytQRTV0UGsxdlkyc2dRMjl0Y0dGdWVTQlBlVHd2VG0wK1BDOUpibWwwWjFCMGVUNDhSR0owY2tGbmRENDhSbWx1U1c1emRHNUpaRDQ4UWtsRFBrbFVSVXhHU1VoSVBDOUNTVU0rUEM5R2FXNUpibk4wYmtsa1Bqd3ZSR0owY2tGbmRENDhMMGR5Y0Voa2NqNDhUM0puYm14SGNuQkpibVpCYm1SVGRITStQRTl5WjI1c1RYTm5TV1ErVFZOSFNVUXlNREl6TURndE1qd3ZUM0puYm14TmMyZEpaRDQ4VDNKbmJteE5jMmRPYlVsa1BuQmhhVzR1TURBeExqQXdNUzR3TWp3dlQzSm5ibXhOYzJkT2JVbGtQanhIY25CVGRITStVa3BEVkR3dlIzSndVM1J6UGp4VGRITlNjMjVKYm1ZK1BGSnpiajQ4VUhKMGNuaytNalVnUTI5dWRHVnVkQ0J1YjNRZ1lXeHNiM2RsWkR3dlVISjBjbmsrUEM5U2MyNCtQQzlUZEhOU2MyNUpibVkrUEM5UGNtZHViRWR5Y0VsdVprRnVaRk4wY3o0OEwwTnpkRzF5VUcxMFUzUnpVbkIwUGp3dlJHOWpkVzFsYm5RKzwvQ29udGVudD48L0FwcGxpY2F0aW9uUmVzcG9uc2U+</mod:ApplicationResponse></cor:downloadFileout></soapenv:Body></soapenv:Envelope>';

    const df: DFInterface = {
      userParams: {
        bank: 'Samlink',
        environment: 'PRODUCTION',
        customerId: '12312312',
        Base64EncodedRootCA: '',
        rejectUnauthorized: true,
      },
      verifyResponseSignature: false,
      Base64EncodedBankCsr: '',
      requestUrl: '',
      Timestamp: '2021-08-06T01:01:48+03:00',
      SoftwareId: {name: 'TEST', version: '0.0.0'} as SoftwareIdInterface,
      ExecutionSerial: '',
      Base64EncodedClientCsr: '',
      RequestId: '123456',
      language: 'FI',
      fileType: 'XP',
      fileReferences: ['123123123123']
    };

    const dfResponse = new DFApplicationResponse(df, dfApplicationResponseMessage);
    const parsed: DFFileDescriptor = await dfResponse.parseBody();

    expect(parsed.FileReference).to.equal('1231231231');
    expect(parsed.FileType).to.equal(FileTypes.XP);
    expect(parsed.Status).to.equal('DLD');
    expect(parsed.Deletable).to.equal('false');

    expect(parsed.PaymentStatusReport?.MessageIdentifier).to.equal( '01231231_1231231231231');
    expect(parsed.PaymentStatusReport?.OriginalMessageIdentification).to.equal( 'MSGID202308-2');
    expect(parsed.PaymentStatusReport?.OriginalPaymentInformationIdentification).to.equal( 'pain.001.001.02');
    expect(parsed.PaymentStatusReport?.Status.GroupStatus).to.equal('RJCT');

    expect(parsed.BankStatement).to.equal(null);
  });



  it('should return expected bank statement details', async () => {
    const dfApplicationResponseMessage = '<?xml version=\'1.0\' encoding=\'UTF-8\'?><soapenv:Envelope xmlns:cor="http://bxd.fi/CorporateFileService" xmlns:mod="http://model.bxd.fi" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"><soapenv:Header></soapenv:Header><soapenv:Body xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="id-6571415b-3220-4ecc-9ed3-96ba4c1f4289"><cor:downloadFileout><mod:ResponseHeader><mod:SenderId>12345678</mod:SenderId><mod:RequestId>123456</mod:RequestId><mod:Timestamp>2023-08-28T14:30:53.628</mod:Timestamp><mod:ResponseCode>00</mod:ResponseCode><mod:ResponseText>OK</mod:ResponseText><mod:ReceiverId></mod:ReceiverId></mod:ResponseHeader><mod:ApplicationResponse>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PEFwcGxpY2F0aW9uUmVzcG9uc2UgeG1sbnM9Imh0dHA6Ly9ieGQuZmkveG1sZGF0YS8iIHhtbG5zOm5zMj0iaHR0cDovL3d3dy53My5vcmcvMjAwMC8wOS94bWxkc2lnIyI+PEN1c3RvbWVySWQ+MTIzNDU2Nzg8L0N1c3RvbWVySWQ+PFRpbWVzdGFtcD4yMDIzLTA4LTI4VDE0OjMwOjUzLjYxMCswMzowMDwvVGltZXN0YW1wPjxSZXNwb25zZUNvZGU+MDA8L1Jlc3BvbnNlQ29kZT48UmVzcG9uc2VUZXh0Pk9LPC9SZXNwb25zZVRleHQ+PEVuY3J5cHRlZD5mYWxzZTwvRW5jcnlwdGVkPjxDb21wcmVzc2VkPmZhbHNlPC9Db21wcmVzc2VkPjxGaWxlRGVzY3JpcHRvcnM+PEZpbGVEZXNjcmlwdG9yPjxGaWxlUmVmZXJlbmNlPjE1MzY3OTQ1MjY8L0ZpbGVSZWZlcmVuY2U+PFRhcmdldElkPk5PTkU8L1RhcmdldElkPjxVc2VyRmlsZW5hbWU+U1RPTDAwMS5PTFRDWDYwSC5DQU1UMDUzLlBTPC9Vc2VyRmlsZW5hbWU+PEZpbGVUeXBlPlhUPC9GaWxlVHlwZT48RmlsZVRpbWVzdGFtcD4yMDIzLTA2LTMwVDIxOjIzOjQ0LjY3OCswMzowMDwvRmlsZVRpbWVzdGFtcD48U3RhdHVzPkRMRDwvU3RhdHVzPjxMYXN0RG93bmxvYWRUaW1lc3RhbXA+MjAyMy0wOC0yN1QyMjowMTo0MC45NzkrMDM6MDA8L0xhc3REb3dubG9hZFRpbWVzdGFtcD48Rm9yd2FyZGVkVGltZXN0YW1wPjIwMjMtMDYtMzBUMjE6MjM6NDQuNjc4KzAzOjAwPC9Gb3J3YXJkZWRUaW1lc3RhbXA+PERlbGV0YWJsZT5mYWxzZTwvRGVsZXRhYmxlPjwvRmlsZURlc2NyaXB0b3I+PC9GaWxlRGVzY3JpcHRvcnM+PEZpbGVUeXBlIHhtbG5zOnhzPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSIgeG1sbnM6eHNpPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZSIgeHNpOnR5cGU9InhzOnN0cmluZyI+WFQ8L0ZpbGVUeXBlPjxDb250ZW50PlBEOTRiV3dnZG1WeWMybHZiajBpTVM0d0lpQmxibU52WkdsdVp6MGlkWFJtTFRnaVB6NDhSRzlqZFcxbGJuUWdlRzFzYm5NOUluVnlianBwYzI4NmMzUmtPbWx6YnpveU1EQXlNanAwWldOb09uaHpaRHBqWVcxMExqQTFNeTR3TURFdU1ESWlJSGh0Ykc1ek9uaHphVDBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01TOVlUVXhUWTJobGJXRXRhVzV6ZEdGdVkyVWlJSGh6YVRwelkyaGxiV0ZNYjJOaGRHbHZiajBpZFhKdU9tbHpienB6ZEdRNmFYTnZPakl3TURJeU9uUmxZMmc2ZUhOa09tTmhiWFF1TURVekxqQXdNUzR3TWlCallXMTBMakExTXk0d01ERXVNREl1ZUhOa0lqNEtQRUpyVkc5RGMzUnRjbE4wYlhRK0NqeEhjbkJJWkhJK0NqeE5jMmRKWkQ0eU1ESXpNRFl6TURRMU1ETXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TUR3dlRYTm5TV1ErQ2p4RGNtVkVkRlJ0UGpJd01qTXRNRFl0TXpCVU1qRTZNRFU2TWpnck1ESTZNREE4TDBOeVpVUjBWRzArQ2p3dlIzSndTR1J5UGdvOFUzUnRkRDRLUEVsa1BqSXdNak13TmpNd05EVXdNekF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd1BDOUpaRDRLUEV4bmJGTmxjVTVpUGpNOEwweG5iRk5sY1U1aVBnbzhRM0psUkhSVWJUNHlNREl6TFRBMkxUTXdWREl4T2pBMU9qSTRLekF5T2pBd1BDOURjbVZFZEZSdFBnbzhSbkpVYjBSMFBnbzhSbkpFZEZSdFBqSXdNak10TURZdE1ERlVNREE2TURBNk1ERXJNREk2TURBOEwwWnlSSFJVYlQ0S1BGUnZSSFJVYlQ0eU1ESXpMVEEyTFRNd1ZESXpPalU1T2pVNUt6QXlPakF3UEM5VWIwUjBWRzArQ2p3dlJuSlViMFIwUGdvOFFXTmpkRDRLUEVsa1BnbzhTVUpCVGo1R1NURXlNelExTmpBd01EQXdNREF3TURBOEwwbENRVTQrQ2p3dlNXUStDanhVY0Q0S1BFTmtQa05CUTBNOEwwTmtQZ284TDFSd1BnbzhRMk41UGtWVlVqd3ZRMk41UGdvOFQzZHVjajRLUEU1dFBreFBVa1ZOSUVsUVUxVk5JRTlaUEM5T2JUNEtQQzlQZDI1eVBnbzhVM1pqY2o0S1BFWnBia2x1YzNSdVNXUStDanhDU1VNK1NWUkZURVpKU0VnOEwwSkpRejRLUEM5R2FXNUpibk4wYmtsa1BnbzhMMU4yWTNJK0Nqd3ZRV05qZEQ0S1BFSmhiRDRLUEZSd1BnbzhRMlJQY2xCeWRISjVQZ284UTJRK1QxQkNSRHd2UTJRK0Nqd3ZRMlJQY2xCeWRISjVQZ284TDFSd1BnbzhRMlIwVEdsdVpUNEtQRWx1WTJ3K1ptRnNjMlU4TDBsdVkydytDanhCYlhRZ1EyTjVQU0pGVlZJaVBqQThMMEZ0ZEQ0S1BDOURaSFJNYVc1bFBnbzhRVzEwSUVOamVUMGlSVlZTSWo0M1BDOUJiWFErQ2p4RFpIUkVZblJKYm1RK1JFSkpWRHd2UTJSMFJHSjBTVzVrUGdvOFJIUStDanhFZEQ0eU1ESXpMVEEyTFRBeFBDOUVkRDRLUEM5RWRENEtQQzlDWVd3K0NqeENZV3crQ2p4VWNENEtQRU5rVDNKUWNuUnllVDRLUEVOa1BrTk1Ra1E4TDBOa1BnbzhMME5rVDNKUWNuUnllVDRLUEM5VWNENEtQRU5rZEV4cGJtVStDanhKYm1Oc1BtWmhiSE5sUEM5SmJtTnNQZ284UVcxMElFTmplVDBpUlZWU0lqNHdQQzlCYlhRK0Nqd3ZRMlIwVEdsdVpUNEtQRUZ0ZENCRFkzazlJa1ZWVWlJK01Ed3ZRVzEwUGdvOFEyUjBSR0owU1c1a1BrTlNSRlE4TDBOa2RFUmlkRWx1WkQ0S1BFUjBQZ284UkhRK01qQXlNeTB3Tmkwek1Ed3ZSSFErQ2p3dlJIUStDand2UW1Gc1BnbzhRbUZzUGdvOFZIQStDanhEWkU5eVVISjBjbmsrQ2p4RFpENURURUZXUEM5RFpENEtQQzlEWkU5eVVISjBjbmsrQ2p3dlZIQStDanhEWkhSTWFXNWxQZ284U1c1amJENTBjblZsUEM5SmJtTnNQZ284UVcxMElFTmplVDBpUlZWU0lqNHdQQzlCYlhRK0Nqd3ZRMlIwVEdsdVpUNEtQRUZ0ZENCRFkzazlJa1ZWVWlJK01Ed3ZRVzEwUGdvOFEyUjBSR0owU1c1a1BrTlNSRlE4TDBOa2RFUmlkRWx1WkQ0S1BFUjBQZ284UkhRK01qQXlNeTB3Tmkwek1Ed3ZSSFErQ2p3dlJIUStDand2UW1Gc1BnbzhWSGh6VTNWdGJYSjVQZ284VkhSc1RuUnlhV1Z6UGdvOFRtSlBaazUwY21sbGN6NHpQQzlPWWs5bVRuUnlhV1Z6UGdvOEwxUjBiRTUwY21sbGN6NEtQRlIwYkVOa2RFNTBjbWxsY3o0S1BFNWlUMlpPZEhKcFpYTStNand2VG1KUFprNTBjbWxsY3o0S1BGTjFiVDR4TkR3dlUzVnRQZ284TDFSMGJFTmtkRTUwY21sbGN6NEtQRlIwYkVSaWRFNTBjbWxsY3o0S1BFNWlUMlpPZEhKcFpYTStNVHd2VG1KUFprNTBjbWxsY3o0S1BGTjFiVDQzUEM5VGRXMCtDand2VkhSc1JHSjBUblJ5YVdWelBnbzhMMVI0YzFOMWJXMXllVDRLUEU1MGNuaytDanhCYlhRZ1EyTjVQU0pGVlZJaVBqYzhMMEZ0ZEQ0S1BFTmtkRVJpZEVsdVpENURVa1JVUEM5RFpIUkVZblJKYm1RK0NqeFRkSE0rUWs5UFN6d3ZVM1J6UGdvOFFtOXZhMmRFZEQ0S1BFUjBQakl3TWpNdE1EWXRNRGc4TDBSMFBnbzhMMEp2YjJ0blJIUStDanhXWVd4RWRENEtQRVIwUGpJd01qTXRNRFl0TURnOEwwUjBQZ284TDFaaGJFUjBQZ284UVdOamRGTjJZM0pTWldZK01USXpORFUyTnpnNU1USXpORFZRTURBd01qd3ZRV05qZEZOMlkzSlNaV1krQ2p4Q2ExUjRRMlErQ2p4RWIyMXVQZ284UTJRK1VFMU9WRHd2UTJRK0NqeEdiV3g1UGdvOFEyUStVa05FVkR3dlEyUStDanhUZFdKR2JXeDVRMlErUlZORFZEd3ZVM1ZpUm0xc2VVTmtQZ284TDBadGJIaytDand2Ukc5dGJqNEtQRkJ5ZEhKNVBnbzhRMlErTnpFd1JrVkZJRlJTUVU1VFJrVlNQQzlEWkQ0S1BFbHpjM0krUmtaR1V6d3ZTWE56Y2o0S1BDOVFjblJ5ZVQ0S1BDOUNhMVI0UTJRK0NqeE9kSEo1UkhSc2N6NDhWSGhFZEd4elBnbzhVbVZtY3o0S1BFRmpZM1JUZG1OeVVtVm1QakV5TXpRMU5qYzRPVEV5TXpRMU5sQXdNREF5UEM5QlkyTjBVM1pqY2xKbFpqNEtQQzlTWldaelBnbzhRVzEwUkhSc2N6NDhWSGhCYlhRK0NqeEJiWFFnUTJONVBTSkZWVklpUGpjOEwwRnRkRDRLUEM5VWVFRnRkRDRLUEM5QmJYUkVkR3h6UGdvOFVteDBaRkIwYVdWelBqeEVZblJ5UGdvOFRtMCtUVTlEU3lCWlVrbFVXVk1nVDFrOEwwNXRQZ284TDBSaWRISStDand2VW14MFpGQjBhV1Z6UGdvOFVtMTBTVzVtUGdvOFZYTjBjbVErVWtWVVZWSk9JRTlHSUZORlVsWkpRMFVnUmtWRlBDOVZjM1J5WkQ0S1BDOVNiWFJKYm1ZK0NqeFNiSFJrUkhSelBnbzhRV05qY0hSdVkwUjBWRzArTWpBeU15MHdOaTB3T0ZRd01Eb3dNRG93TUNzd01qb3dNRHd2UVdOamNIUnVZMFIwVkcwK0Nqd3ZVbXgwWkVSMGN6NEtQQzlVZUVSMGJITStDand2VG5SeWVVUjBiSE0rQ2p3dlRuUnllVDRLUEU1MGNuaytDanhCYlhRZ1EyTjVQU0pGVlZJaVBqYzhMMEZ0ZEQ0S1BFTmtkRVJpZEVsdVpENUVRa2xVUEM5RFpIUkVZblJKYm1RK0NqeFRkSE0rUWs5UFN6d3ZVM1J6UGdvOFFtOXZhMmRFZEQ0S1BFUjBQakl3TWpNdE1EWXRNalk4TDBSMFBnbzhMMEp2YjJ0blJIUStDanhXWVd4RWRENEtQRVIwUGpJd01qTXRNRFl0TWpZOEwwUjBQZ284TDFaaGJFUjBQZ284UVdOamRGTjJZM0pTWldZK01USXpORFUyTjFOSU1EQXhNak0wTlR3dlFXTmpkRk4yWTNKU1pXWStDanhDYTFSNFEyUStDanhFYjIxdVBnbzhRMlErUVVOTlZEd3ZRMlErQ2p4R2JXeDVQZ284UTJRK1RVUlBVRHd2UTJRK0NqeFRkV0pHYld4NVEyUStRMGhTUnp3dlUzVmlSbTFzZVVOa1BnbzhMMFp0YkhrK0Nqd3ZSRzl0Ymo0S1BGQnlkSEo1UGdvOFEyUStOek13VTA5TlJTQk5UME5MSUVaRlJUd3ZRMlErQ2p4SmMzTnlQa1pHUmxNOEwwbHpjM0krQ2p3dlVISjBjbmsrQ2p3dlFtdFVlRU5rUGdvOFRuUnllVVIwYkhNK1BGUjRSSFJzY3o0S1BGSmxabk0rQ2p4QlkyTjBVM1pqY2xKbFpqNHhNak0wTlRZM1UwZ3dNREV5TXpRMVBDOUJZMk4wVTNaamNsSmxaajRLUEM5U1pXWnpQZ284UVcxMFJIUnNjejQ4VkhoQmJYUStDanhCYlhRZ1EyTjVQU0pGVlZJaVBqYzhMMEZ0ZEQ0S1BDOVVlRUZ0ZEQ0S1BDOUJiWFJFZEd4elBnbzhVbTEwU1c1bVBnbzhWWE4wY21RK1UwVlNWa2xEUlNCR1JVVlRJRUpGVkZkRlJVNGdRVUpEUkVWR1J6d3ZWWE4wY21RK0Nqd3ZVbTEwU1c1bVBnbzhVbXgwWkVSMGN6NEtQRUZqWTNCMGJtTkVkRlJ0UGpJd01qTXRNRFl0TWpaVU1EQTZNREE2TURBck1ESTZNREE4TDBGalkzQjBibU5FZEZSdFBnbzhMMUpzZEdSRWRITStDand2VkhoRWRHeHpQZ284TDA1MGNubEVkR3h6UGdvOEwwNTBjbmsrQ2p4T2RISjVQZ284UVcxMElFTmplVDBpUlZWU0lqNDNQQzlCYlhRK0NqeERaSFJFWW5SSmJtUStRMUpFVkR3dlEyUjBSR0owU1c1a1BnbzhVM1J6UGtKUFQwczhMMU4wY3o0S1BFSnZiMnRuUkhRK0NqeEVkRDR5TURJekxUQTJMVEkzUEM5RWRENEtQQzlDYjI5clowUjBQZ284Vm1Gc1JIUStDanhFZEQ0eU1ESXpMVEEyTFRJM1BDOUVkRDRLUEM5V1lXeEVkRDRLUEVGalkzUlRkbU55VW1WbVBqRXlNelExTmpjNE9URXlNelJRTURBd01qd3ZRV05qZEZOMlkzSlNaV1krQ2p4Q2ExUjRRMlErQ2p4RWIyMXVQZ284UTJRK1VFMU9WRHd2UTJRK0NqeEdiV3g1UGdvOFEyUStVa05FVkR3dlEyUStDanhUZFdKR2JXeDVRMlErUlZORFZEd3ZVM1ZpUm0xc2VVTmtQZ284TDBadGJIaytDand2Ukc5dGJqNEtQRkJ5ZEhKNVBnbzhRMlErTnpFd0lGUlNRVTVUUmtWU1BDOURaRDRLUEVsemMzSStSa1pHVXp3dlNYTnpjajRLUEM5UWNuUnllVDRLUEM5Q2ExUjRRMlErQ2p4T2RISjVSSFJzY3o0OFZIaEVkR3h6UGdvOFVtVm1jejRLUEVGalkzUlRkbU55VW1WbVBqRXlNelExTmpjNE9URXlNelJRTURBd01qd3ZRV05qZEZOMlkzSlNaV1krQ2p3dlVtVm1jejRLUEVGdGRFUjBiSE0rUEZSNFFXMTBQZ284UVcxMElFTmplVDBpUlZWU0lqNDNQQzlCYlhRK0Nqd3ZWSGhCYlhRK0Nqd3ZRVzEwUkhSc2N6NEtQRkpzZEdSUWRHbGxjejQ4UkdKMGNqNEtQRTV0UGsxUFEwc2dXVkpKVkZsVElFOVpQQzlPYlQ0S1BDOUVZblJ5UGdvOEwxSnNkR1JRZEdsbGN6NEtQRkp0ZEVsdVpqNEtQRlZ6ZEhKa1BsTlBUVVVnUlZaRlRsUWdSRVZUUTFKSlVGUkpUMDQ4TDFWemRISmtQZ284TDFKdGRFbHVaajRLUEZKc2RHUkVkSE0rQ2p4QlkyTndkRzVqUkhSVWJUNHlNREl6TFRBMkxUSTNWREF3T2pBd09qQXdLekF5T2pBd1BDOUJZMk53ZEc1alJIUlViVDRLUEM5U2JIUmtSSFJ6UGdvOEwxUjRSSFJzY3o0S1BDOU9kSEo1UkhSc2N6NEtQQzlPZEhKNVBnbzhMMU4wYlhRK0Nqd3ZRbXRVYjBOemRHMXlVM1J0ZEQ0S1BDOUViMk4xYldWdWREND08L0NvbnRlbnQ+PC9BcHBsaWNhdGlvblJlc3BvbnNlPg==</mod:ApplicationResponse></cor:downloadFileout></soapenv:Body></soapenv:Envelope>';

    const df: DFInterface = {
      userParams: {
        bank: 'Samlink',
        environment: 'PRODUCTION',
        customerId: '97357407',
        Base64EncodedRootCA: '',
        rejectUnauthorized: true,
      },
      verifyResponseSignature: false,
      Base64EncodedBankCsr: '',
      requestUrl: '',
      Timestamp: '2021-08-06T01:01:48+03:00',
      SoftwareId: {name: 'TEST', version: '0.0.0'} as SoftwareIdInterface,
      ExecutionSerial: '',
      Base64EncodedClientCsr: '',
      RequestId: '123456',
      language: 'FI',
      fileType: 'XT',
      fileReferences: ['553481']
    };

    const dfResponse = new DFApplicationResponse(df, dfApplicationResponseMessage);
    const parsed: DFFileDescriptor = await dfResponse.parseBody();
    // console.dir(parsed.BankStatement?.statement.statementEntries);

    expect(1).to.equal(1);

    expect(parsed.PaymentStatusReport).to.equal(null);
  });

});

